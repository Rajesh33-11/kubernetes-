<img width="651" height="373" alt="image" src="https://github.com/user-attachments/assets/85fb9a3d-5a6d-4b0b-9e3a-7a8e8dc33ecb" />

**Kubernetes Architecture has 2 Types of Nodes:**
1. Master Node
2. Worker Node


## Master Node Server Components

**Master Node Server has 4 Types of Components:**
1. API Server
2. Controller Manager (`kube-controller-manager`)
3. Scheduler (`kube-scheduler`)
4. ETCD

---

## Client

- The person who is managing Kubernetes
- The person who is interacting with Kubernetes is called the **Client**

---

## Master Node Components Explanation

### 1. API Server
- Acts as a bridge between:
  - Client ‚Üî Master Components
  - Component ‚Üî Component

---

### 2. Controller Manager (`kube-controller-manager`)
- Helps in **recreation of Pods**
- Controller Manager has 2 types:
  1. Replication Controller Manager (for Master Node)
  2. Node Controller Manager (for Worker Node)

---

### 3. Scheduler (`kube-scheduler`)
- Schedules the right Pod on the right Worker Node

---

### 4. ETCD
- Stores cluster data such as:
  - Number of Pods
  - Number of Nodes
- Data is stored in **Key-Value pair format**

---

## Worker Node Server Components

**Worker Node Server has 3 Types of Components:**
1. Kubelet
2. Kube-Proxy
3. Pods

> By default, Worker Node runs container workloads (Docker/Container Runtime)

---

### 1. Kubelet
- Sends Worker Node information to API Server, such as:
  - Number of Pods
  - CPU usage
  - RAM usage
  - Overall node status

---

### 2. Kube-Proxy
- Handles **networking** inside the cluster

---

### 3. Pods
- A Pod is a **group of containers**

### How to Setup K8S Cluster: 
## Rerequirements:
#### -CREATE EC2 USING AMAZON-LINUX-AMI WITH 25 GB EBS AND INSTANCE_TYPE BE M7I-FLUX.LARGE(Eg: 2 CPUS,  4GB RAM),
#### -CREATE IAM ROLE WITH ADMIN ACCESS ADD THE ROLE TO YOUR  EC2 SERVER

====================================================================
#### curl -Lo kops https://github.com/kubernetes/kops/releases/download/$(curl -s   https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d '"' -f 4)/kops-linux-amd64
#### chmod +x kops
#### sudo mv kops /usr/local/bin/kops
#### kops version

# Explanation 
## 1Ô∏è‚É£ Download the latest kops binary
```
curl -Lo kops https://github.com/kubernetes/kops/releases/download/$(curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d '"' -f 4)/kops-linux-amd64
```

üëâ What‚Äôs happening here:

- Inner curl hits GitHub API and fetches the latest kops release tag

- grep tag_name | cut ... extracts the version (for example: v1.29.x)

- Outer curl -Lo kops downloads the Linux amd64 binary

- File is saved locally as kops

This ensures you always install the latest stable version (best practice).

## 2Ô∏è‚É£ Make the binary executable
```
chmod +x kops
```

üëâ This gives execute permission to the kops binary
Without this, Linux won‚Äôt allow you to run it.

## 3Ô∏è‚É£ Move kops to a global PATH location
```
sudo mv kops /usr/local/bin/kops
```

üëâ Why /usr/local/bin?

It‚Äôs already part of the system $PATH

You can run kops from any directory

Standard practice for CLI tools

## 4Ô∏è‚É£ Verify kops installation
```
kops version
```

üëâ Expected output:
You should see something like:

Version 1.xx.x (git-xxxxx)

If you see the version ‚Üí ‚úÖ kops is installed correctly

====================================================================
```
aws s3 mb s3://7aamdevopsshammuk8s.k8s.locals
aws s3api put-bucket-versioning --bucket 7aamdevopsshammuk8s.k8s.locals --region ap-south-1 --versioning-configuration Status=Enabled
export KOPS_STATE_STORE=s3://7aamdevopsshammuk8s.k8s.locals
```

### Create S3 bucket for kOps state store
aws s3 mb s3://7aamdevopsshammuk8s.k8s.locals

### Enable versioning on the S3 bucket
aws s3api put-bucket-versioning \
  --bucket 7aamdevopsshammuk8s.k8s.locals \
  --region ap-south-1 \
  --versioning-configuration Status=Enabled

### Set kOps state store environment variable
export KOPS_STATE_STORE=s3://7aamdevopsshammuk8s.k8s.locals

====================================================================



curl -Lo kops https://github.com/kubernetes/kops/releases/download/$(curl -s   https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d '"' -f 4)/kops-linux-amd64
chmod +x kops
sudo mv kops /usr/local/bin/kops
kops version
curl -LO "https://dl.k8s.io/release/$(curl -L -s  https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
chmod +x kubectl 
mv kubectl /usr/local/bin/

kubectl version
aws s3 mb s3://7aamdevopsshammuk8s.k8s.locals
aws s3api put-bucket-versioning --bucket 7aamdevopsshammuk8s.k8s.locals --region ap-south-1 --versioning-configuration Status=Enabled
export KOPS_STATE_STORE=s3://7aamdevopsshammuk8s.k8s.locals
kops create cluster --name=shammu.k8s.local --zones=ap-northeast-3a --control-plane-size=m7i-flex.large --control-plane-count=1 --node-count=2 --node-size=t3.micro --image=ami-0fe4e90accd5cc34a
kops update cluster --name shammu.k8s.local --yes --admin
==================================================================
kops delete cluster --name shammu.k8s.local --yes
